{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const menuToggle = document.getElementById('menu-toggle');\nconst menuClose = document.getElementById('menu-close');\nconst mobileMenu = document.getElementById('mobile-menu');\nconst mobileNavLinks = document.querySelectorAll('.mobile-nav-link'); // Ссылки внутри моб. меню\n\n// Функция для закрытия меню\nfunction closeMenu() {\n  mobileMenu.classList.remove('is-open');\n  document.body.style.overflow = ''; // Восстановить прокрутку body\n}\n\n// Функция для закрытия мобильного меню при изменении разрешения\nfunction closeMobileMenuOnResize() {\n  if (window.innerWidth >= 1280) {\n    // Убираем класс \"is-open\", если ширина экрана >= 1280px\n    mobileMenu.classList.remove('is-open');\n  }\n}\n// Добавляем обработчик события \"resize\"\nwindow.addEventListener('resize', closeMobileMenuOnResize);\n\n// Открыть меню\nmenuToggle.addEventListener('click', () => {\n  mobileMenu.classList.add('is-open');\n  document.body.style.overflow = 'hidden'; // Запретить прокрутку body\n});\n\n// Закрыть меню по кнопке X\nmenuClose.addEventListener('click', closeMenu);\n\n// Закрыть меню при клике на ссылку внутри меню\nmobileNavLinks.forEach(link => {\n  link.addEventListener('click', closeMenu);\n});\n\n// Закрыть меню при клике вне области меню (опционально)\ndocument.addEventListener('click', event => {\n  if (\n    mobileMenu.classList.contains('is-open') &&\n    !mobileMenu.contains(event.target) &&\n    !menuToggle.contains(event.target)\n  ) {\n    closeMenu();\n  }\n});\n\n// --- Логика для активной ссылки навигации при скролле (пример) ---\nconst sections = document.querySelectorAll('main section[id]');\nconst navLinks = document.querySelectorAll('.nav-link'); // Выбираем все ссылки навигации (десктоп и мобильные)\n\nwindow.addEventListener('scroll', () => {\n  let current = '';\n  // Начинаем проверку с hero\n  const heroSection = document.getElementById('hero');\n  if (\n    window.pageYOffset <\n    heroSection.offsetTop + heroSection.offsetHeight - window.innerHeight / 3\n  ) {\n    current = 'hero';\n  } else {\n    sections.forEach(section => {\n      const sectionTop = section.offsetTop;\n      // Уменьшаем trigger point, чтобы ссылка активировалась раньше\n      const sectionTriggerPoint = sectionTop - window.innerHeight / 3;\n\n      if (window.pageYOffset >= sectionTriggerPoint) {\n        current = section.getAttribute('id');\n      }\n    });\n  }\n\n  // Особый случай для футера (ссылка Scroll Down ведет сюда)\n  const footer = document.getElementById('footer');\n  if (\n    window.innerHeight + window.pageYOffset >=\n    document.body.offsetHeight - 50\n  ) {\n    // Если почти внизу страницы\n    current = 'footer'; // Технически не секция, но для ссылки 'Scroll Down'\n  }\n\n  navLinks.forEach(link => {\n    link.classList.remove('active');\n    // Проверяем href.\n    const linkHref = link.getAttribute('href').substring(1);\n\n    if (linkHref === current) {\n      // Исключаем подсветку \"Scroll Down\" как активного пункта меню\n      // Исключаем подсветку ссылок в мобильном меню и футере\n      if (\n        linkHref !== 'footer' &&\n        !link.classList.contains('mobile-nav-link') &&\n        !link.closest('.footer-nav-list')\n      ) {\n        link.classList.add('active');\n      }\n    }\n  });\n});\n\ndocument.querySelectorAll('.nav-link').forEach(link => {\n  link.addEventListener('click', function (event) {\n    event.preventDefault(); // Предотвращаем стандартное поведение ссылки\n\n    const targetId = this.getAttribute('href').substring(1); // Получаем ID секции\n    const targetElement = document.getElementById(targetId);\n\n    if (targetElement) {\n      targetElement.scrollIntoView({\n        behavior: 'smooth', // Плавная прокрутка\n        block: 'start', // Прокрутка к началу секции\n      });\n    }\n  });\n});\n\n// Находим ссылку с классом \"logo\"\nconst logoLink = document.querySelector('.logo');\n\n// Добавляем обработчик события \"click\"\nlogoLink.addEventListener('click', event => {\n  window.location.href = '/index.html';\n\n  // Убираем активный класс у всех пунктов меню\n  const navLinks = document.querySelectorAll('.desktop-nav-list .nav-link');\n  navLinks.forEach(link => link.classList.remove('active'));\n\n  // Логика для обновления состояния (если нужно)\n  console.log('Logo clicked, menu state updated.');\n});\n\n// --- Логика для кнопки \"Show more\" в каталоге ---\nconst showMoreButton = document.getElementById('show-more-catalog');\nconst catalogList = document.getElementById('catalog-list');\nconst catalogItems = catalogList.querySelectorAll('.catalog-list-item');\nif (showMoreButton) {\n  showMoreButton.addEventListener('click', () => {\n    // Показать все элементы каталога\n    catalogItems.forEach(item => {\n      // Используем класс для управления видимостью, чтобы не конфликтовать с медиа-запросами\n      item.classList.add('show-more-visible');\n    });\n    // Скрыть кнопку \"Show more\" после нажатия\n    showMoreButton.style.display = 'none';\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Находим элементы\n  const saleList = document.querySelector('.sale-list');\n  const mainPicture = document.getElementById('main-picture'); // Используем ID для точности\n  const mainImage = mainPicture?.querySelector('.sale-main-img'); // Ищем внутри picture\n  const listItems = document.querySelectorAll('.sale-list-item');\n\n  // Проверяем, найдены ли все необходимые элементы\n  if (!saleList || !mainPicture || !mainImage) {\n    console.error(\n      'Не удалось найти необходимые элементы галереи: saleList, main-picture или sale-main-img.'\n    );\n    return; // Прекращаем выполнение\n  }\n\n  // Добавляем обработчик событий на весь список (делегирование событий)\n  saleList.addEventListener('click', function (event) {\n    // Находим ближайший родительский элемент 'li'\n    const listItem = event.target.closest('.sale-list-item');\n\n    // Если клик был не по элементу списка или его содержимому, выходим\n    if (!listItem) {\n      return;\n    }\n\n    // Находим изображение миниатюры внутри элемента списка\n    const thumbnailImage = listItem.querySelector('.sale-img');\n\n    // Проверяем наличие миниатюры и необходимых data-атрибутов\n    if (!thumbnailImage || !thumbnailImage.dataset.largeSrc) {\n      console.warn(\n        'Кликнутое изображение миниатюры не найдено или отсутствует data-large-src.'\n      );\n      return;\n    }\n\n    // --- Получаем данные из миниатюры ---\n    const largeSrc = thumbnailImage.dataset.largeSrc;\n    // Используем largeSrc по умолчанию для srcset, если data-large-srcset нет\n    const largeSrcset = thumbnailImage.dataset.largeSrcset || largeSrc;\n    // ВОЗВРАЩАЕМ ПОЛУЧЕНИЕ И ПАРСИНГ sourcesData\n    let sourcesData = [];\n    try {\n      // Пытаемся распарсить JSON из data-sources. Если его нет или он некорректный, будет пустой массив.\n      sourcesData = JSON.parse(thumbnailImage.dataset.sources || '[]');\n    } catch (e) {\n      console.error('Ошибка парсинга JSON из data-sources:', e);\n      // Оставляем sourcesData пустым массивом\n    }\n\n    // --- Обновляем основное изображение (<img>) ---\n    mainImage.src = largeSrc;\n    mainImage.srcset = largeSrcset; // Обновляем srcset основного img\n\n    // --- ВОЗВРАЩАЕМ ОБНОВЛЕНИЕ <source> внутри основного <picture> ---\n    const mainSources = mainPicture.querySelectorAll('source');\n\n    // Удаляем старые source элементы, чтобы избежать дублирования\n    mainSources.forEach(source => source.remove());\n\n    // --- Управление активным классом для визуального выделения ---\n    listItems.forEach(item => item.classList.remove('active'));\n    listItem.classList.add('active');\n  });\n});\n"],"names":["menuToggle","menuClose","mobileMenu","mobileNavLinks","closeMenu","closeMobileMenuOnResize","link","event","sections","navLinks","current","heroSection","section","sectionTriggerPoint","linkHref","targetId","targetElement","logoLink","showMoreButton","catalogList","catalogItems","item","saleList","mainPicture","mainImage","listItems","listItem","thumbnailImage","largeSrc","largeSrcset","sourcesData","e","source"],"mappings":"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"}